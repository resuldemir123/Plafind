@model IEnumerable<AlanyaBusinessGuide.Models.Business>

@{
    ViewData["Title"] = "Alanya İşletme Rehberi - Ana Sayfa";
    var featuredBusinesses = ViewBag.FeaturedBusinesses as List<AlanyaBusinessGuide.Models.Business>;
    var topRatedBusinesses = ViewBag.TopRatedBusinesses as List<AlanyaBusinessGuide.Models.Business>;
    var categories = ViewBag.Categories as List<string>;
    var latestNews = ViewBag.LatestNews as List<AlanyaBusinessGuide.Models.News>;
}

<!-- Hero Section -->
<div class="hero-section" style="background: linear-gradient(135deg, rgba(0,0,0,0.7), rgba(0,0,0,0.5)), url('/images/190_alanya.jpg'); background-size: cover; background-position: center; min-height: 100vh; position: relative; display: flex; align-items: center; width: 100vw; margin-left: calc(-50vw + 50%); margin-right: calc(-50vw + 50%);">
    <div class="container-fluid px-4">
        <div class="row justify-content-center text-center">
            <div class="col-lg-10 col-xl-8">
                <div class="hero-content text-white">
                    <h1 class="display-3 fw-bold mb-4" style="text-shadow: 2px 2px 8px rgba(0,0,0,0.8);">
                        🏛️ PlaceFind
                    </h1>
                    <p class="lead mb-4" style="text-shadow: 1px 1px 4px rgba(0,0,0,0.8); font-size: 1.3rem;">
                        Alanya'nın en prestijli işletmelerini keşfedin, deneyimlerinizi paylaşın ve favori yerlerinizi kaydedin
                    </p>
                    <div class="hero-stats mb-5">
                        <div class="row text-center">
                            <div class="col-md-3">
                                <div class="stat-item">
                                    <h3 class="text-warning fw-bold">@(featuredBusinesses?.Count ?? 0)+</h3>
                                    <p class="mb-0">Öne Çıkan İşletme</p>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-item">
                                    <h3 class="text-warning fw-bold">@(categories?.Count ?? 0)+</h3>
                                    <p class="mb-0">Kategori</p>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-item">
                                    <h3 class="text-warning fw-bold">1000+</h3>
                                    <p class="mb-0">Mutlu Müşteri</p>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-item">
                                    <h3 class="text-warning fw-bold">24/7</h3>
                                    <p class="mb-0">Hizmet</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="hero-buttons">
                        <a href="@Url.Action("Search", "Home")" class="btn btn-warning btn-lg me-3 mb-2">
                            <i class="fas fa-search"></i> İşletme Ara
                        </a>
                        @if (User.Identity.IsAuthenticated)
                        {
                            @if (User.IsInRole("Admin"))
                            {
                                <a href="@Url.Action("Index", "Admin")" class="btn btn-primary btn-lg mb-2">
                                    <i class="fas fa-cog"></i> Admin Panel
                                </a>
                            }
                            else if (User.IsInRole("User"))
                            {
                                <a href="@Url.Action("Index", "User")" class="btn btn-primary btn-lg mb-2">
                                    <i class="fas fa-user"></i> Kullanıcı Panel
                                </a>
                            }
                        }
                        
                    </div>
                </div>
            </div>
        </div>

        <!-- Scroll Down Indicator -->
        <div class="scroll-indicator">
            <a href="#main-content" class="scroll-down">
                <i class="fas fa-chevron-down"></i>
            </a>
        </div>
    </div>
</div>

<!-- Main Content -->
<div id="main-content" class="main-content">

    <!-- Öne Çıkan İşletmeler -->
    @if (featuredBusinesses != null && featuredBusinesses.Any())
    {
        <section class="py-5 bg-light">
            <div class="container-fluid px-4">
                <div class="row mb-5">
                    <div class="col-12 text-center">
                        <h2 class="display-5 fw-bold text-primary mb-3">⭐ Öne Çıkan İşletmeler</h2>
                        <p class="lead text-muted">Alanya'nın en beğenilen ve kaliteli işletmeleri</p>
                    </div>
                </div>
                <div class="row">
                    @foreach (var business in featuredBusinesses.Take(3))
                    {
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card business-card shadow-lg h-100 border-0">
                                <div class="card-img-wrapper">
                                    @if (!string.IsNullOrEmpty(business.ImageUrl))
                                    {
                                        <img src="@business.ImageUrl" class="card-img-top" alt="@business.Name - İşletme Resmi" style="height: 200px; object-fit: cover;" onerror="this.src='/images/default.jpg'; this.alt='Varsayılan Resim';" />
                                    }
                                    else
                                    {
                                        <img src="/images/default.jpg" class="card-img-top" alt="@business.Name - Varsayılan Resim" style="height: 200px; object-fit: cover;" />
                                    }
                                    <div class="card-overlay">
                                        <div class="rating-badge">
                                            @if (business.AverageRating > 0)
                                            {
                                                <span class="badge bg-warning text-dark">
                                                    <i class="fas fa-star"></i> @business.AverageRating.ToString("F1")
                                                </span>
                                            }
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body d-flex flex-column">
                                    <div class="d-flex justify-content-between align-items-start mb-2">
                                        <h5 class="card-title fw-bold">@business.Name</h5>
                                        <span class="badge bg-primary">@(business.Category?.Name ?? "Genel")</span>
                                    </div>
                                    <p class="card-text text-muted">@(business.Description?.Length > 100 ? business.Description.Substring(0, 100) + "..." : business.Description)</p>
                                    <ul class="list-unstyled small text-muted mt-2">
                                        <li><i class="fas fa-map-marker-alt"></i> @business.Address</li>
                                        <li><i class="fas fa-phone"></i> @business.Phone</li>
                                        <li><i class="fas fa-clock"></i> @business.WorkingHours</li>
                                        <li><i class="fas fa-dollar-sign"></i> @business.PriceRange</li>
                                        @* Website bağlantısı şimdilik gösterilmiyor *@
                                    </ul>
                                    <div class="mt-auto">
                                        <div class="d-flex jubirstify-content-between align-items-center mb-3">
                                            <div class="text-warning">
                                                @if (business.AverageRating > 0)
                                                {
                                                    @for (int i = 1; i <= 5; i++)
                                                    {
                                                        if (i <= business.AverageRating)
                                                        {
                                                            <i class="fas fa-star"></i>
                                                        }
                                                        else
                                                        {
                                                            <i class="far fa-star"></i>
                                                        }
                                                    }
                                                }
                                            </div>
                                            <small class="text-muted">
                                                <i class="fas fa-comments"></i> @business.TotalReviews yorum
                                            </small>
                                        </div>
                                        <a href="@Url.Action("BusinessDetails", "User", new { id = business.Id })" class="btn btn-primary w-100">
                                            <i class="fas fa-eye"></i> Detayları Görüntüle
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
                <div class="text-center mt-4">
                    <a href="@Url.Action("Search", "Home")" class="btn btn-outline-primary btn-lg">
                        <i class="fas fa-search"></i> Tüm İşletmeleri Görüntüle
                    </a>
                </div>
            </div>
        </section>
    }

    <!-- Kategoriler -->
    @if (categories != null && categories.Any())
    {
        <section class="py-5">
            <div class="container-fluid px-4">
                <div class="row mb-5">
                    <div class="col-12 text-center">
                        <h2 class="display-5 fw-bold text-primary mb-3">🏷️ Kategoriler</h2>
                        <p class="lead text-muted">İhtiyacınıza göre kategoriler arasından seçim yapın</p>
                    </div>
                </div>
                <div class="row">
                    @foreach (var category in categories.Take(8))
                    {
                        <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                            <a href="@Url.Action("Search", "Home", new { category = category })" class="category-card">
                                <div class="card h-100 border-0 shadow-sm category-hover">
                                    <div class="card-body text-center">
                                        <div class="category-icon mb-3">
                                            @switch (category)
                                            {
                                                case "Restoran":
                                                    <i class="fas fa-utensils fa-3x text-primary"></i>
                                                    break;
                                                case "Otel":
                                                    <i class="fas fa-bed fa-3x text-primary"></i>
                                                    break;
                                                case "Mağaza":
                                                    <i class="fas fa-store fa-3x text-primary"></i>
                                                    break;
                                                case "Spa & Wellness":
                                                    <i class="fas fa-spa fa-3x text-primary"></i>
                                                    break;
                                                case "Eğlence":
                                                    <i class="fas fa-theater-masks fa-3x text-primary"></i>
                                                    break;
                                                case "Sağlık":
                                                    <i class="fas fa-heartbeat fa-3x text-primary"></i>
                                                    break;
                                                case "Eğitim":
                                                    <i class="fas fa-graduation-cap fa-3x text-primary"></i>
                                                    break;
                                                default:
                                                    <i class="fas fa-tag fa-3x text-primary"></i>
                                                    break;
                                            }
                                        </div>
                                        <h5 class="card-title fw-bold">@category</h5>
                                        <p class="text-muted small">Keşfet</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    }
                </div>
            </div>
        </section>
    }

    <!-- Son Haberler -->
    @if (latestNews != null && latestNews.Any())
    {
        <section class="py-5 bg-light">
            <div class="container-fluid px-4">
                <div class="row mb-5">
                    <div class="col-12 text-center">
                        <h2 class="display-5 fw-bold text-primary mb-3">📰 Son Haberler</h2>
                        <p class="lead text-muted">Alanya'dan güncel haberler ve gelişmeler</p>
                    </div>
                </div>
                <div class="row">
                    @foreach (var news in latestNews)
                    {
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card news-card shadow-lg h-100 border-0">
                                <div class="card-body d-flex flex-column">
                                    <div class="news-header mb-3">
                                        <div class="d-flex justify-content-between align-items-start mb-2">
                                            <span class="badge bg-warning text-dark">
                                                <i class="fas fa-newspaper me-1"></i>Haber
                                            </span>
                                            <small class="text-muted">
                                                <i class="fas fa-calendar me-1"></i>@news.PublishDate.ToString("dd MMM yyyy")
                                            </small>
                                        </div>
                                        <h5 class="card-title fw-bold text-primary">@news.Title</h5>
                                    </div>
                                    <div class="news-content flex-grow-1">
                                        <p class="card-text text-muted">
                                            @if (!string.IsNullOrEmpty(news.Content))
                                            {
                                                @(news.Content.Length > 150 ? news.Content.Substring(0, 150) + "..." : news.Content)
                                            }
                                        </p>
                                    </div>
                                    <div class="news-footer mt-auto">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <small class="text-muted">
                                                <i class="fas fa-user me-1"></i>@(news.Author?.UserName ?? "Admin")
                                            </small>
                                            <a href="@Url.Action("Index", "News")" class="btn btn-outline-primary btn-sm">
                                                <i class="fas fa-arrow-right me-1"></i>Devamını Oku
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
                <div class="text-center mt-4">
                    <a href="@Url.Action("Index", "News")" class="btn btn-primary btn-lg">
                        <i class="fas fa-newspaper me-2"></i> Tüm Haberleri Görüntüle
                    </a>
                </div>
            </div>
        </section>
    }

    <!-- En Çok Beğenilen İşletmeler -->
    @if (topRatedBusinesses != null && topRatedBusinesses.Any())
    {
        <section class="py-5 bg-light">
            <div class="container-fluid px-4">
                <div class="row mb-5">
                    <div class="col-12 text-center">
                        <h2 class="display-5 fw-bold text-primary mb-3">🏆 En Çok Beğenilen İşletmeler</h2>
                        <p class="lead text-muted">Müşterilerimizin en çok beğendiği işletmeler</p>
                    </div>
                </div>
                <div class="row">
                    @foreach (var business in topRatedBusinesses.Take(3))
                    {
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card business-card shadow-lg h-100 border-0">
                                <div class="card-img-wrapper">
                                    @if (!string.IsNullOrEmpty(business.ImageUrl))
                                    {
                                        <img src="@business.ImageUrl" class="card-img-top" alt="@business.Name - İşletme Resmi" style="height: 200px; object-fit: cover;" onerror="this.src='/images/default.jpg'; this.alt='Varsayılan Resim';" />
                                    }
                                    else
                                    {
                                        <img src="/images/default.jpg" class="card-img-top" alt="@business.Name - Varsayılan Resim" style="height: 200px; object-fit: cover;" />
                                    }
                                    <div class="card-overlay">
                                        <div class="rating-badge">
                                            @if (business.AverageRating > 0)
                                            {
                                                <span class="badge bg-warning text-dark">
                                                    <i class="fas fa-star"></i> @business.AverageRating.ToString("F1")
                                                </span>
                                            }
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body d-flex flex-column">
                                    <div class="d-flex justify-content-between align-items-start mb-2">
                                        <h5 class="card-title fw-bold">@business.Name</h5>
                                        <span class="badge bg-primary">@(business.Category?.Name ?? "Genel")</span>
                                    </div>
                                    <p class="card-text text-muted">@(business.Description?.Length > 100 ? business.Description.Substring(0, 100) + "..." : business.Description)</p>
                                    <ul class="list-unstyled small text-muted mt-2">
                                        <li><i class="fas fa-map-marker-alt"></i> @business.Address</li>
                                        <li><i class="fas fa-phone"></i> @business.Phone</li>
                                        <li><i class="fas fa-clock"></i> @business.WorkingHours</li>
                                        <li><i class="fas fa-dollar-sign"></i> @business.PriceRange</li>
                                        @if (!string.IsNullOrEmpty(business.Website))
                                        {
                                            <li><i class="fas fa-globe"></i> <a href="@business.Website" target="_blank" class="text-decoration-none">@business.Website</a></li>
                                        }
                                    </ul>
                                    <div class="mt-auto">
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <div class="text-warning">
                                                @if (business.AverageRating > 0)
                                                {
                                                    @for (int i = 1; i <= 5; i++)
                                                    {
                                                        if (i <= business.AverageRating)
                                                        {
                                                            <i class="fas fa-star"></i>
                                                        }
                                                        else
                                                        {
                                                            <i class="far fa-star"></i>
                                                        }
                                                    }
                                                }
                                            </div>
                                            <small class="text-muted">
                                                <i class="fas fa-comments"></i> @business.TotalReviews yorum
                                            </small>
                                        </div>
                                        <a href="@Url.Action("BusinessDetails", "User", new { id = business.Id })" class="btn btn-primary w-100">
                                            <i class="fas fa-eye"></i> Detayları Görüntüle
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </section>
    }

    <!-- Misyonumuz ve Hakkımızda -->
    <section class="py-5">
        <div class="container-fluid px-4">
            <div class="row">
                <div class="col-lg-6 mb-4">
                    <div class="card h-100 border-0 shadow-lg">
                        <div class="card-body p-5">
                            <div class="text-center mb-4">
                                <i class="fas fa-bullseye fa-3x text-primary"></i>
                            </div>
                            <h3 class="card-title text-center fw-bold text-primary mb-4">🎯 Misyonumuz</h3>
                            <p class="card-text lead text-center">
                                Alanya'daki tüm kaliteli işletmeleri tek bir platformda toplayarak,
                                hem yerel halk hem de turistler için en iyi deneyimi sunmak.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 mb-4">
                    <div class="card h-100 border-0 shadow-lg">
                        <div class="card-body p-5">
                            <div class="text-center mb-4">
                                <i class="fas fa-heart fa-3x text-danger"></i>
                            </div>
                            <h3 class="card-title text-center fw-bold text-primary mb-4">💝 Değerlerimiz</h3>
                            <ul class="list-unstyled lead">
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Kalite odaklı yaklaşım</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Müşteri memnuniyeti</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Şeffaflık ve güvenilirlik</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Sürekli gelişim</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Alanya Hakkında -->
    <section class="py-5 bg-primary text-white">
        <div class="container-fluid px-4">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <h2 class="display-5 fw-bold mb-4">🏛️ Alanya'ya Hoş Geldiniz</h2>
                    <p class="lead mb-4">
                        Alanya, tarihi dokusu ve modern yaşamın buluştuğu bir Akdeniz cennetidir.
                        İşletme rehberimizle bu eşsiz deneyimi yaşayın ve Alanya'nın sunduğu
                        tüm güzellikleri keşfedin.
                    </p>
                    <div class="row text-center">
                        <div class="col-md-3">
                            <h4 class="fw-bold">3000+ Yıl</h4>
                            <p>Tarihi Geçmiş</p>
                        </div>
                        <div class="col-md-3">
                            <h4 class="fw-bold">350+ Gün</h4>
                            <p>Güneşli Gün</p>
                        </div>
                        <div class="col-md-3">
                            <h4 class="fw-bold">2 Milyon+</h4>
                            <p>Yıllık Turist</p>
                        </div>
                        <div class="col-md-3">
                            <h4 class="fw-bold">100+</h4>
                            <p>Plaj</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 text-center">
                    <a href="https://tr.wikipedia.org/wiki/Alanya" target="_blank" class="btn btn-light btn-lg">
                        <i class="fas fa-external-link-alt"></i> Daha Fazla Bilgi
                    </a>
                </div>
            </div>
        </div>
    </section>
</div>

<!-- Custom CSS -->
<style>
    body {
        margin: 0;
        padding: 0;
        overflow-x: hidden;
    }

    .hero-section {
        position: relative;
        overflow: hidden;
        width: 100vw;
        margin-left: calc(-50vw + 50%);
        margin-right: calc(-50vw + 50%);
        z-index: 1;
    }

    .scroll-indicator {
        position: absolute;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%);
    }

    .scroll-down {
        color: white;
        font-size: 2rem;
        animation: bounce 2s infinite;
        text-decoration: none;
    }

    @@keyframes bounce {
        0%, 20%, 50%, 80%, 100% {
            transform: translateY(0);
        }

        40% {
            transform: translateY(-10px);
        }

        60% {
            transform: translateY(-5px);
        }
    }

    .business-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border-radius: 15px;
        overflow: hidden;
    }

        .business-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1) !important;
        }

    .card-img-wrapper {
        position: relative;
        height: 200px;
        overflow: hidden;
    }

        .card-img-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

    .business-card:hover .card-img-wrapper img {
        transform: scale(1.1);
    }

    .news-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border-radius: 15px;
        overflow: hidden;
    }

        .news-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1) !important;
        }

    .news-header {
        border-bottom: 1px solid #eee;
        padding-bottom: 1rem;
    }

    .news-content {
        min-height: 100px;
    }

    .news-footer {
        border-top: 1px solid #eee;
        padding-top: 1rem;
    }

    .card-overlay {
        position: absolute;
        top: 15px;
        right: 15px;
    }

    .category-hover {
        transition: all 0.3s ease;
        border-radius: 15px;
    }

        .category-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1) !important;
        }

    .category-card {
        text-decoration: none;
        color: inherit;
    }

        .category-card:hover {
            text-decoration: none;
            color: inherit;
        }

    .stat-item {
        padding: 20px;
        border-radius: 10px;
        background: rgba(255,255,255,0.1);
        backdrop-filter: blur(10px);
        margin: 10px 0;
    }

    .hero-buttons .btn {
        margin: 5px;
        border-radius: 50px;
        padding: 12px 30px;
        font-weight: 600;
        transition: all 0.3s ease;
    }

        .hero-buttons .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

    .card-body ul {
    .card-body ul {
        padding-left: 0;
        margin-bottom: 1rem;
    }

        .card-body ul li {
            margin-bottom: 0.25rem;
        }

        .card-body ul a {
            color: #007bff;
        }

            .card-body ul a:hover {
                text-decoration: underline;
            }

    @@media (max-width:768px) {
 .page-header {
 flex-direction: column;
 align-items: flex-start;
 }

 .header-icon-wrapper {
 width:60px;
 height:60px;
 }

 .header-icon-wrapper i {
 font-size:1.75rem;
 }

 .page-title {
 font-size:2rem;
 }

 .article-image-wrapper {
 min-height:220px;
 }

 .article-content {
 padding:1.5rem;
 min-height: auto;
 }

 .article-title {
 font-size:1.25rem;
 }

 .article-meta {
 flex-direction: column;
 align-items: flex-start;
 }

 .meta-items {
 width:100%;
 }

 .article-actions {
 width:100%;
 justify-content: space-between;
 }
 }
</style>